-- ===================== AIRPORT =====================
CREATE TABLE airport (
                         airport_id SERIAL PRIMARY KEY,
                         airport_name VARCHAR(100) NOT NULL,
                         country VARCHAR(50) NOT NULL,
                         state VARCHAR(50),
                         city VARCHAR(50) NOT NULL,
                         created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                         updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ===================== AIRLINE =====================
CREATE TABLE airline (
                         airline_id SERIAL PRIMARY KEY,
                         airline_code VARCHAR(10) UNIQUE NOT NULL,
                         airline_name VARCHAR(100) NOT NULL,
                         country VARCHAR(50),
                         created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                         updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ===================== FLIGHT =====================
CREATE TABLE flight (
                        flight_id SERIAL PRIMARY KEY,
                        airline_id INT REFERENCES airline(airline_id),
                        departure_airport_id INT REFERENCES airport(airport_id),
                        arrival_airport_id INT REFERENCES airport(airport_id),
                        scheduled_departure TIMESTAMP NOT NULL,
                        scheduled_arrival TIMESTAMP NOT NULL,
                        actual_departure TIMESTAMP,
                        actual_arrival TIMESTAMP,
                        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ===================== PASSENGER =====================
CREATE TABLE passenger (
                           passenger_id SERIAL PRIMARY KEY,
                           first_name VARCHAR(50) NOT NULL,
                           last_name VARCHAR(50) NOT NULL,
                           gender VARCHAR(10),
                           date_of_birth DATE,
                           citizenship_country VARCHAR(50),
                           residence_country VARCHAR(50),
                           passport_number VARCHAR(20) UNIQUE,
                           created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                           updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ===================== BOOKING =====================
CREATE TABLE booking (
                         booking_id SERIAL PRIMARY KEY,
                         flight_id INT REFERENCES flight(flight_id),
                         passenger_id INT REFERENCES passenger(passenger_id),
                         status VARCHAR(20) DEFAULT 'confirmed',
                         booking_platform VARCHAR(50),
                         ticket_price NUMERIC(10,2),
                         created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                         updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ===================== BOARDING PASS =====================
CREATE TABLE boarding_pass (
                               boarding_pass_id SERIAL PRIMARY KEY,
                               booking_id INT REFERENCES booking(booking_id),
                               seat VARCHAR(10),
                               boarding_time TIMESTAMP,
                               created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                               updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ===================== BAGGAGE =====================
CREATE TABLE baggage (
                         baggage_id SERIAL PRIMARY KEY,
                         booking_id INT REFERENCES booking(booking_id),
                         weight_kg NUMERIC(6,2),
                         created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                         updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ===================== BAGGAGE CHECKING =====================
CREATE TABLE baggage_checking (
                                  baggage_checking_id SERIAL PRIMARY KEY,
                                  booking_id INT REFERENCES booking(booking_id),
                                  passenger_id INT REFERENCES passenger(passenger_id),
                                  check_result VARCHAR(100),
                                  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                                  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

--
-- SECURITY CHECK
CREATE TABLE security_check (
                                security_check_id SERIAL PRIMARY KEY,
                                passenger_id INT REFERENCES passenger(passenger_id),
                                check_result VARCHAR(100),
                                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
